-- MySQL Script generated by MySQL Workbench
-- Fri Apr 24 12:23:37 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ATO_authenticator
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `ATO_authenticator` ;

-- -----------------------------------------------------
-- Schema ATO_authenticator
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ATO_authenticator` DEFAULT CHARACTER SET utf8 ;
-- -----------------------------------------------------
-- Schema new_schema1
-- -----------------------------------------------------
USE `ATO_authenticator` ;

-- -----------------------------------------------------
-- Table `ATO_authenticator`.`priviliges`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`priviliges` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`priviliges` (
  `PRIVid` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(250) NOT NULL,
  `desc` TEXT NULL,
  `notes` TEXT NULL,
  `dailyHash` VARCHAR(80) NULL DEFAULT '007',
  PRIMARY KEY (`PRIVid`),
  UNIQUE INDEX `PRIVid_UNIQUE` (`PRIVid` ASC),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATO_authenticator`.`persons`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`persons` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`persons` (
  `LOGid` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `AGSno` VARCHAR(45) NOT NULL,
  `login` VARCHAR(45) NOT NULL,
  `firstName` VARCHAR(45) NOT NULL,
  `lastName` VARCHAR(45) NOT NULL,
  `phone` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `desc` TEXT NULL,
  `notes` TEXT NULL,
  PRIMARY KEY (`LOGid`),
  UNIQUE INDEX `LOGid_UNIQUE` (`LOGid` ASC),
  UNIQUE INDEX `AGSno_UNIQUE` (`AGSno` ASC),
  UNIQUE INDEX `login_UNIQUE` (`login` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATO_authenticator`.`passwords`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`passwords` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`passwords` (
  `PASSid` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `LOGid` INT UNSIGNED NOT NULL,
  `timestamp` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `password` VARCHAR(45) NOT NULL,
  `current` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`PASSid`),
  INDEX `LOGID_idx` (`LOGid` ASC),
  UNIQUE INDEX `PASSid_UNIQUE` (`PASSid` ASC),
  CONSTRAINT `LOGid_pass`
    FOREIGN KEY (`LOGid`)
    REFERENCES `ATO_authenticator`.`persons` (`LOGid`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATO_authenticator`.`applications`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`applications` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`applications` (
  `APPid` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `appName` VARCHAR(45) NOT NULL,
  `desc` TEXT NULL,
  `notes` TEXT NULL,
  PRIMARY KEY (`APPid`),
  UNIQUE INDEX `APPid_UNIQUE` (`APPid` ASC),
  UNIQUE INDEX `appName_UNIQUE` (`appName` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATO_authenticator`.`persons_priviliges`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`persons_priviliges` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`persons_priviliges` (
  `PPRid` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `PRIVid` INT UNSIGNED NOT NULL,
  `LOGid` INT UNSIGNED NOT NULL,
  `LOGidAssigned` INT UNSIGNED NULL DEFAULT 0,
  `timestampApplied` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `timestampAssigned` DATETIME NULL,
  `timestampStart` DATETIME NULL,
  `timestampEnd` DATETIME NULL,
  PRIMARY KEY (`PPRid`),
  UNIQUE INDEX `PPRid_UNIQUE` (`PPRid` ASC),
  INDEX `LOGidAssigner_idx` (`LOGidAssigned` ASC),
  INDEX `LOGid_idx` (`LOGid` ASC),
  INDEX `PRIVid_idx` (`PRIVid` ASC),
  CONSTRAINT `PRIVid_PersPrivs`
    FOREIGN KEY (`PRIVid`)
    REFERENCES `ATO_authenticator`.`priviliges` (`PRIVid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `LOGid_PersPrivs`
    FOREIGN KEY (`LOGid`)
    REFERENCES `ATO_authenticator`.`persons` (`LOGid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `LOGidAssigner_PersPrivs`
    FOREIGN KEY (`LOGidAssigned`)
    REFERENCES `ATO_authenticator`.`persons` (`LOGid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATO_authenticator`.`application_priviliges`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`application_priviliges` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`application_priviliges` (
  `APRid` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `APPid` INT UNSIGNED NOT NULL,
  `PRIVid` INT UNSIGNED NOT NULL,
  `desc` TEXT NULL,
  `notes` TEXT NULL,
  `timestampApplied` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `timestampStart` DATETIME NULL,
  `timestampEnd` DATETIME NULL,
  PRIMARY KEY (`APRid`),
  INDEX `APPID_idx` (`APPid` ASC),
  INDEX `PRIVID_idx` (`PRIVid` ASC),
  UNIQUE INDEX `APRid_UNIQUE` (`APRid` ASC),
  CONSTRAINT `APPid_AppPrivs`
    FOREIGN KEY (`APPid`)
    REFERENCES `ATO_authenticator`.`applications` (`APPid`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `PRIVid_AppPrivs`
    FOREIGN KEY (`PRIVid`)
    REFERENCES `ATO_authenticator`.`priviliges` (`PRIVid`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATO_authenticator`.`hashes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATO_authenticator`.`hashes` ;

CREATE TABLE IF NOT EXISTS `ATO_authenticator`.`hashes` (
  `LOGid` INT UNSIGNED NOT NULL,
  `Hash` VARCHAR(45) NULL,
  `timestamp` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  INDEX `LOGid_hash_idx` (`LOGid` ASC),
  CONSTRAINT `LOGid_hash`
    FOREIGN KEY (`LOGid`)
    REFERENCES `ATO_authenticator`.`persons` (`LOGid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE = '';
DROP USER IF EXISTS user_client;
SET SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';
CREATE USER 'user_client' IDENTIFIED BY '45h2g45hg23kjh53j456276DFSJG';

GRANT SELECT, INSERT, TRIGGER ON TABLE `ATO_authenticator`.* TO 'user_client';
GRANT SELECT, INSERT, TRIGGER ON TABLE `new_schema1`.* TO 'user_client';
GRANT SELECT ON TABLE `ATO_authenticator`.* TO 'user_client';
GRANT SELECT ON TABLE `new_schema1`.* TO 'user_client';
SET SQL_MODE = '';
DROP USER IF EXISTS user_admin;
SET SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';
CREATE USER 'user_admin' IDENTIFIED BY 'gkh5g63khgSDFRHGjjkl23452';

GRANT ALL ON `ATO_authenticator`.* TO 'user_admin';
GRANT ALL ON `new_schema1`.* TO 'user_admin';
GRANT SELECT ON TABLE `ATO_authenticator`.* TO 'user_admin';
GRANT SELECT ON TABLE `new_schema1`.* TO 'user_admin';
GRANT SELECT, INSERT, TRIGGER ON TABLE `ATO_authenticator`.* TO 'user_admin';
GRANT SELECT, INSERT, TRIGGER ON TABLE `new_schema1`.* TO 'user_admin';
GRANT SELECT, INSERT, TRIGGER, UPDATE, DELETE ON TABLE `ATO_authenticator`.* TO 'user_admin';
GRANT SELECT, INSERT, TRIGGER, UPDATE, DELETE ON TABLE `new_schema1`.* TO 'user_admin';

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `ATO_authenticator`.`priviliges`
-- -----------------------------------------------------
START TRANSACTION;
USE `ATO_authenticator`;
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (1, 'Order of Queensland', 'Recipients earn the right to play minesweeper, and drive really badly', 'god damn these people drive poorly', 'NULL');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (2, 'Minesweeper', 'Fun', 'I played this too much as a member of the low socio-economic population in childhood', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (3, 'Discord', 'High restrictions needed here', 'Probably a security risk', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (4, 'Portal 2', 'There is no cake', 'There is merely the illusion of cake', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (5, 'postal2', 'FILLER DATA', 'NOT NULL', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (6, 'word', 'FILLER DATA', 'NOT NULL', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (7, 'excel', 'FILLER DATA', 'NOT NULL', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (8, 'powerpoint', 'FILLER DATA', 'NOT NULL', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (9, 'mysql workbench', 'FILLER DATA', 'NOT NULL', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (10, 'php my admin', 'FILLER DATA', 'NOT NULL', '');
INSERT INTO `ATO_authenticator`.`priviliges` (`PRIVid`, `name`, `desc`, `notes`, `dailyHash`) VALUES (11, 'code accademy', 'FILLER DATA', 'NOT NULL', '');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ATO_authenticator`.`persons`
-- -----------------------------------------------------
START TRANSACTION;
USE `ATO_authenticator`;
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (1, '1234Banana', 'BananaKing', 'Humphrey', 'Appleby', '12345677890', 'Yes@Yes.Yes', 'Has a knighthood', 'Absolute Champion Bloke - ACB');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (2, '5678Orange', 'CombOvers22', 'Monald', 'Bump', '987654321', 'Nope@Nope.Nope', 'spray painted orange', 'lots of complaints');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (3, 'AOA43', 'AussieOutbackAdventures', 'Yes', 'Yep', '90789092385', 'HAHA@HAHA.HAHA', 'Yes', 'Yes indeed');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (4, 'mwolt3', 'rumbletumble', '420', 'blzIT', '111111111', 'lel', 'is LITERALLY JESUS', 'PRAISE BE');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (5, 'test1', 'testboi1', 'yahh', 'yeet', '1111112', 'lol', 'PLEB 1', 'POORPER');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (6, 'test2', 'testgirl2', 'yeet', 'yahh', '1111114', 'Nope@Nope.Nope', 'PLEB 2', 'POORPER');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (7, 'test3', 'testboi2', 'yahh', 'yeet', '1111116', 'fam', 'PLEB 3', 'POORPER');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (8, 'test4', 'testgirl3', 'yeet', 'yahh', '1111118', 'Yes@Yes.Yes', 'PLEB 4', 'POORPER');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (9, 'test5', 'testboi3', 'yahh', 'yeet', '1111120', 'Nope@Nope.Nope', 'PLEB 5', 'POORPER');
INSERT INTO `ATO_authenticator`.`persons` (`LOGid`, `AGSno`, `login`, `firstName`, `lastName`, `phone`, `email`, `desc`, `notes`) VALUES (10, 'test6', 'testgirl4', 'yeet', 'yahh', '1111122', 'HAHA@HAHA.HAHA', 'PLEB 6', 'POORPER');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ATO_authenticator`.`applications`
-- -----------------------------------------------------
START TRANSACTION;
USE `ATO_authenticator`;
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (1, 'Minesweeper', 'Fun', 'I played this too much as a member of the low socio-economic population in childhood');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (2, 'Discord', 'High restrictions needed here', 'Probably a security risk');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (3, 'Portal 2', 'There is no cake', 'There is merely the illusion of cake');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (4, 'postal2', 'FILLER DATA', 'NOT NULL');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (5, 'word', 'FILLER DATA', 'NOT NULL');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (6, 'excel', 'FILLER DATA', 'NOT NULL');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (7, 'powerpoint', 'FILLER DATA', 'NOT NULL');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (8, 'mysql workbench', 'FILLER DATA', 'NOT NULL');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (9, 'php my admin', 'FILLER DATA', 'NOT NULL');
INSERT INTO `ATO_authenticator`.`applications` (`APPid`, `appName`, `desc`, `notes`) VALUES (10, 'code accademy', 'FILLER DATA', 'NOT NULL');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ATO_authenticator`.`persons_priviliges`
-- -----------------------------------------------------
START TRANSACTION;
USE `ATO_authenticator`;
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (1, 1, 1, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (2, 2, 2, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (3, 3, 3, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (4, 4, 4, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (5, 5, 5, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (6, 6, 6, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (7, 7, 7, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (8, 8, 8, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (9, 9, 9, 4);
INSERT INTO `ATO_authenticator`.`persons_priviliges` (`PPRid`, `PRIVid`, `LOGid`, `LOGidAssigned`) VALUES (10, 10, 10, 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ATO_authenticator`.`application_priviliges`
-- -----------------------------------------------------
START TRANSACTION;
USE `ATO_authenticator`;
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (1, 1, 3, 'dfgjdfgj', 'dfghjdfgj');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (2, 2, 4, 'hrfghf', 'dfgjdg');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (3, 3, 5, 'fgjhdfg', 'dfgjdf');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (4, 4, 6, 'dfgjdfgj', 'dfghjdfgj');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (5, 5, 7, 'hrfghf', 'dfgjdg');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (6, 6, 8, 'fgjhdfg', 'dfgjdf');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (7, 7, 9, 'dfgjdfgj', 'dfghjdfgj');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (8, 8, 10, 'hrfghf', 'dfgjdg');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (9, 9, 1, 'fgjhdfg', 'dfgjdf');
INSERT INTO `ATO_authenticator`.`application_priviliges` (`APRid`, `APPid`, `PRIVid`, `desc`, `notes`) VALUES (10, 10, 2, 'dfgjdfgj', 'dfghjdfgj');

COMMIT;

